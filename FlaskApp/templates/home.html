<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bootstrap demo</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.css" integrity="sha512-eG8C/4QWvW9MQKJNw2Xzr0KW7IcfBSxljko82RuSs613uOAg/jHEeuez4dfFgto1u6SRI/nXmTr9YPCjs1ozBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<style>
		img{
			width:100px;
			height:100px;
		}
	</style>
</head>
<body>
	
	<div class="container">
		<div class="fs-1 text-center">IoT Cloud</div>
		{% if data.name == "Athithyan" %}
		<div class="alert alert-success mousetest" role="alert">
			welcome {{ data.name }} you are in {{data.env}} environment.
		</div>

		
		<div class="container">
			<div class="row">
				<div class="col-auto">
					<button class="btn btn-primary">Add Device</button>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<div class="card text-center">
						<div class="card-header">
							Pi Cam 1
						</div>
						<div class="card-body">
							<h5 class="card-title">Special title treatment</h5>
							<p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
							<button id="pi-cam-1" class="btn btn-primary pi-cam-viewer">Cam 1</button>
						</div>
						<div class="card-footer text-muted">
							2 days ago
						</div>
					</div>
				</div>
				<div class="col">
					<div class="card text-center">
						<div class="card-header">
							Pi Cam 2
						</div>
						<div class="card-body">
							<h5 class="card-title">Special title treatment</h5>
							<p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
							<button id="pi-cam-2" class="btn btn-primary pi-cam-viewer">Cam 2</button>
						</div>
						<div class="card-footer text-muted">
							2 days ago
						</div>
					</div>
				</div>
				<div class="col">
					<div class="card text-center">
						<div class="card-header">
							Pi Cam 3
						</div>
						<div class="card-body">
						  <h5 class="card-title">Special title treatment</h5>
						  <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
						  <button id="pi-cam-3" class="btn btn-primary pi-cam-viewer">Cam 3</button>
						</div>
						<div class="card-footer text-muted">
						  2 days ago
						</div>
					  </div>
				</div>
			</div>
		</div>
		
		<div>
			<ul id="images">
				<li><img src="https://picsum.photos/id/26/4209/2769" alt="Picture 1"></li>
				<li><img src="https://picsum.photos/id/20/3670/2462" alt="Picture 2"></li>
				<li><img src="https://picsum.photos/id/49/1280/792" alt="Picture 3"></li>
				<li><img src="{{ data.avatar }}" alt="Picture 3"></li>
			</ul>
		</div>
		{% elif data.name == "root" %}
		<div class="alert alert-danger" role="alert">
			Can't execute as {{ data.name }} you are in {{data.env}} environment.
		</div>
		{% endif %}
	</div>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="<KEY>" crossorigin="anonymous"></script>
		
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.common.min.js" integrity="sha512-Lz/6nSYe4HNv0bbr5OsVaqQCNvWjtowEO2KN82rcoTeJeapLPsxIHiWxx7O8T9+Swf3lxBMfd3rV45W0X4WCsg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.js" integrity="sha512-MdZwHb4u4qCy6kVoTLL8JxgPnARtbNCUIjTCihWcgWhCsLfDaQJib4+OV0O8IS+ea+3Xv/6pH3vYY4LWpU/gbQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		
		
		<script>
			
			function apicall(){
				return `
				<li><img src="https://picsum.photos/id/26/4209/2769" alt="Picture 1"></li>
				<li><img src="https://picsum.photos/id/20/3670/2462" alt="Picture 2"></li>
				<li><img src="https://picsum.photos/id/49/1280/792" alt="Picture 3"></li>
				<li><img src="{{ data.avatar }}" alt="Picture 3"></li>
				<li><img src="https://picsum.photos/id/20/3670/2462" alt="Picture 2"></li>
				<li><img src="https://picsum.photos/id/49/1280/792" alt="Picture 3"></li>
				`
			}
			
			const images = document.getElementById('images');
			const viewer = new Viewer(images,
			{
				loop : true,
				interval : 500,
				/*shown : function(event){
					console.log(event);
					console.log("shown")
				},  */
				/*  viewed : function(event){
					console.log(event);
					console.log("viewed")
				} */
			});
			/*  $(images).on('show',function(event){
				console.log(event);
				console.log("began to show");
			})  */
			$(images).on('view',function(event){
				console.log(event);
				console.log("began to view " + (event.detail.index + 1) + " / " + viewer.length);
				
				var current_image = event.detail.index + 1;
				var length = viewer.length;
				var left_over = 1
				
				if ((length - current_image) <= left_over){
					console.log("add more")
					$("#images").append(apicall());
					viewer.update();
				}
				
			});
			
			
			$('#pi-cam-1').on('click', function(e){
				viewer.show();
			});

			$('.mousetest').on('mouseenter', function(e){
				console.log("mouse entered");
			});

			$('.mousetest').on('mouseleave', function(e){
				console.log("mouse exited");
			});

		/*	$('.mousetest').on('mousemove', function(e){
				console.log("mouse moving...");
				console.log(e);
			});	*/
			
			/*comment*/
		</script>
		
	</body>
	</html>